(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["page-payment-receipt"],{"3ed9":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"page__receipt receipt"},[t.testMode&&t.ticket?a("div",{staticClass:"testMode"},[t._v("Demo mode")]):t._e(),t.ticket?a("div",{staticClass:"receipt__wrapper"},[t.ticket.daycode&&!t.hasExpired?a("div",{staticClass:"receipt__logo-container"},[a("div",{staticClass:"receipt__logo-bg"}),a("div",{staticClass:"receipt__logo-content",style:{"background-color":"#"+(t.onLine&&t.ticket.daycode.colorCode?t.ticket.daycode.colorCode:"000000")}},[a("span",{staticClass:"receipt__logo-yt"},[t._v(t._s(t.ticket.daycode.textCode))]),a("img",{staticClass:"receipt__logo-text",attrs:{src:i("5aa9")}})])]):t._e(),a("div",{staticClass:"receipt__content"},[t.onLine?[t.hasExpired?a("span",{staticClass:"receipt__expired"},[t._v(t._s(t.$t("letbane.expired_uppercase")))]):t._e(),!t.hasExpired&&t.invalidTicket?a("span",{staticClass:"receipt__invalid"},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("letbane.invalid_ticket_uppercase"))+"\n\t\t\t\t\t")]):t._e(),t.hasExpired||!t.countdown||t.invalidTicket?t._e():[a("span",{staticClass:"receipt__timer"},[t._v(t._s(t.countdown))]),a("span",{staticClass:"receipt__availability"},[t._v(t._s(t.$t("letbane.your_ticket_is_valid")))])]]:a("span",{staticClass:"receipt__offline"},[t._v(t._s(t.$t("letbane.offline_uppercase")))]),t.ticket.orderLines&&t.ticket.orderLines.length?[t.invalidTicket?[a("div",{staticClass:"receipt__invalid-text"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.$t("letbane.invalid_description"))+"\n\t\t\t\t\t\t")]),t._m(1),a("span",{staticClass:"receipt__controlcode receipt__controlcode--empty"})]:[a("div",{staticClass:"receipt__orders"},t._l(t.ticket.orderLines,(function(e,i){return a("div",{key:i,staticClass:"receipt__order"},[a("span",{staticClass:"receipt__label"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.totalPassengerCount)+"x\n\t\t\t\t\t\t\t\t\t"),a("span",{staticClass:"receipt__label--capitalize"},[t._v(t._s(e.productName[t.selectedLanguage]))])]),a("span",{staticClass:"receipt__value receipt__value--price"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("prettyPrice")(e.priceCents))+"\n\t\t\t\t\t\t\t\t")])])})),0),a("div",{staticClass:"receipt__line"}),t.ticket.customer&&t.ticket.customer.username?a("div",{staticClass:"receipt__phone"},["PhoneNumber"===t.ticket.customer.usernameType?a("span",{staticClass:"receipt__label receipt__label--noshrink"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$t("letbane.phone_number"))+"\n\t\t\t\t\t\t\t")]):t._e(),"Email"===t.ticket.customer.usernameType?a("span",{staticClass:"receipt__label receipt__label--noshrink"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$t("letbane.email"))+"\n\t\t\t\t\t\t\t")]):t._e(),a("span",{staticClass:"receipt__value"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.ticket.customer.username)+"\n\t\t\t\t\t\t\t")])]):t._e(),t.ticket.validFromInstant?a("div",{staticClass:"receipt__validfrom"},[a("span",{staticClass:"receipt__label"},[t._v(t._s(t.$t("letbane.valid_from")))]),a("span",{staticClass:"receipt__date receipt__value",class:{"receipt__date--capitalize":"en"===t.selectedLanguage}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.formatDate(t.ticket.validFromInstant))+"\n\t\t\t\t\t\t\t")])]):t._e(),t.ticket.validToInstant?a("div",{staticClass:"receipt__validto"},[a("span",{staticClass:"receipt__label"},[t._v(t._s(t.$t("letbane.valid_to")))]),a("span",{staticClass:"receipt__date receipt__value",class:{"receipt__date--capitalize":"en"===t.selectedLanguage}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.formatDate(t.ticket.validToInstant))+"\n\t\t\t\t\t\t\t")])]):t._e(),a("div",{staticClass:"receipt__line"}),t.ticket.validToInstant?a("div",{staticClass:"receipt__paid"},[a("span",{staticClass:"receipt__label"},[t._v(t._s(t.$t("letbane.paid_uppercase")))]),a("span",{staticClass:"receipt__value"},[t._v(t._s(t._f("prettyPrice")(t.ticket.priceCents)))])]):t._e(),t._m(0),t.ticket.controlCode?a("span",{staticClass:"receipt__controlcode"},[t._v(" +"+t._s(t.ticket.controlCode)+"+ ")]):t._e()]]:[a("div",{staticClass:"receipt__invalid-text"},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("letbane.invalid_description"))+"\n\t\t\t\t\t")]),t._m(2),a("span",{staticClass:"receipt__controlcode"})]],2),a("div",{staticClass:"receipt__ribbon",class:[{"receipt__ribbon--active":!t.hasExpired&&t.countdown&&t.onLine},{"receipt__ribbon--expired":t.hasExpired&&t.onLine},{"receipt__ribbon--invalid":!t.hasExpired&&t.onLine&&t.invalidTicket},{"receipt__ribbon--offline":!t.onLine}]},[t.onLine?[!t.hasExpired&&t.countdown?a("span",{staticClass:"receipt__ribbon-text receipt__ribbon-text--animate",class:[{"receipt__ribbon-text--da":"da"===t.selectedLanguage},{"receipt__ribbon-text--en":"en"===t.selectedLanguage}]},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("letbane.odense_letbane_uppercase"))+" • "+t._s(t.$t("letbane.odense_letbane_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.odense_letbane_uppercase"))+" • "+t._s(t.$t("letbane.odense_letbane_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.odense_letbane_uppercase"))+" • "+t._s(t.$t("letbane.odense_letbane_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.odense_letbane_uppercase"))+" • "+t._s(t.$t("letbane.odense_letbane_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.odense_letbane_uppercase"))+" • "+t._s(t.$t("letbane.odense_letbane_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.odense_letbane_uppercase"))+" • "+t._s(t.$t("letbane.odense_letbane_uppercase"))+" •\n\t\t\t\t\t")]):t._e(),!t.hasExpired&&t.invalidTicket?a("span",{staticClass:"receipt__ribbon-text"},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("letbane.invalid_ticket_uppercase"))+" • "+t._s(t.$t("letbane.invalid_ticket_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.invalid_ticket_uppercase"))+" • "+t._s(t.$t("letbane.invalid_ticket_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.invalid_ticket_uppercase"))+" • "+t._s(t.$t("letbane.invalid_ticket_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.invalid_ticket_uppercase"))+" • "+t._s(t.$t("letbane.invalid_ticket_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.invalid_ticket_uppercase"))+" • "+t._s(t.$t("letbane.invalid_ticket_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.invalid_ticket_uppercase"))+" • "+t._s(t.$t("letbane.invalid_ticket_uppercase"))+" •\n\t\t\t\t\t")]):t._e(),t.hasExpired?a("span",{staticClass:"receipt__ribbon-text"},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("letbane.expired_uppercase"))+" • "+t._s(t.$t("letbane.expired_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.expired_uppercase"))+" • "+t._s(t.$t("letbane.expired_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.expired_uppercase"))+" • "+t._s(t.$t("letbane.expired_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.expired_uppercase"))+" • "+t._s(t.$t("letbane.expired_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.expired_uppercase"))+" • "+t._s(t.$t("letbane.expired_uppercase"))+" •\n\t\t\t\t\t\t"+t._s(t.$t("letbane.expired_uppercase"))+" • "+t._s(t.$t("letbane.expired_uppercase"))+" •\n\t\t\t\t\t")]):t._e()]:a("span",{staticClass:"receipt__ribbon-text"},[t._v("\n\t\t\t\t\t"+t._s(t.$t("letbane.offline_uppercase"))+" • "+t._s(t.$t("letbane.offline_uppercase"))+" •\n\t\t\t\t\t"+t._s(t.$t("letbane.offline_uppercase"))+" • "+t._s(t.$t("letbane.offline_uppercase"))+" •\n\t\t\t\t\t"+t._s(t.$t("letbane.offline_uppercase"))+" • "+t._s(t.$t("letbane.offline_uppercase"))+" •\n\t\t\t\t\t"+t._s(t.$t("letbane.offline_uppercase"))+" • "+t._s(t.$t("letbane.offline_uppercase"))+" •\n\t\t\t\t\t"+t._s(t.$t("letbane.offline_uppercase"))+" • "+t._s(t.$t("letbane.offline_uppercase"))+" •\n\t\t\t\t\t"+t._s(t.$t("letbane.offline_uppercase"))+" • "+t._s(t.$t("letbane.offline_uppercase"))+" •\n\t\t\t\t\t"+t._s(t.$t("letbane.offline_uppercase"))+" • "+t._s(t.$t("letbane.offline_uppercase"))+" •\n\t\t\t\t")])],2)]):t._e()]),a("router-link",{staticClass:"page__button reset-button",class:{"page__button--active":t.hasExpired&&t.onLine||t.invalidTicket},attrs:{to:{path:"/"},title:t.$t("letbane.buy_more_tickets_uppercase")}},[a("span",{staticClass:"page__button-text"},[t._v(t._s(t.$t("letbane.buy_more_tickets_uppercase")))])])],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"receipt__line--dashed"},[i("div",{staticClass:"receipt__circles"},[i("div",{staticClass:"receipt__circle--left"}),i("div",{staticClass:"receipt__circle--right"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"receipt__line--dashed"},[i("div",{staticClass:"receipt__circles"},[i("div",{staticClass:"receipt__circle--left"}),i("div",{staticClass:"receipt__circle--right"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"receipt__line--dashed"},[i("div",{staticClass:"receipt__circles"},[i("div",{staticClass:"receipt__circle--left"}),i("div",{staticClass:"receipt__circle--right"})])])}],s=i("2f62"),c=i("c723"),r=i("12cb"),_=i("c755"),l=i("7f45"),o=i.n(l);function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){u(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var b={data:function(){return{ticket:null,countdown:null,hasExpired:!1,onLine:navigator.onLine,invalidTicket:!1,testMode:!1}},computed:d({},Object(s["c"])({getSecondaryWebshop:"system/getSecondaryWebshop",getServerDateAsMoment:"date/getServerDateAsMoment"}),{selectedLanguage:function(){return Object(r["b"])().locale},odenseTramIdentifier:function(){return this.getSecondaryWebshop.filter((function(t){return"OdenseTram"===t.identifier}))[0].identifier}}),watch:{"$i18n.locale":function(){var t=this.$route.query.orderId,e=this.$cookies.get(t);e&&this.formatCountdown()}},mounted:function(){var t=this.$route.query.orderId,e=this.$cookies.get(t)||null;this.getTicket(t,e)},methods:{getTicket:function(t,e){var i=this,a={"X-MobileTicket-ClientCompany":this.odenseTramIdentifier,"X-MobileTicket-ClientLanguage":this.selectedLanguage},n={orderId:t,verificationToken:e};Object(c["c"])("POST","v2/tickets/view",n,a).then((function(e){i.ticket=e.responseBody,i.ticket&&i.ticket.verificationTokenUpdated&&i.ticket.verificationToken&&i.$cookies.set(t,i.ticket.verificationToken,new Date(i.ticket.validToInstant).toUTCString()),i.ticket&&i.ticket.customer&&"PhoneNumber"===i.ticket.customer.usernameType&&(i.ticket.customer.username=i.ticket.customer.username.replace("-"," ")),i.formatCountdown();var a=setInterval((function(){i.formatCountdown()}),500);window.addEventListener("online",i.updateOnlineStatus),window.addEventListener("offline",i.updateOnlineStatus),i.$once("hook:destroyed",(function(){clearInterval(a),window.removeEventListener("online",i.updateOnlineStatus),window.removeEventListener("offline",i.updateOnlineStatus)}))})).catch((function(){console.log("FAILED GETTING TICKET")}))},formatCountdown:function(){var t=Object(_["a"])((new Date).toISOString()).valueOf(),e=Object(_["a"])(this.ticket.validToInstant).valueOf(),i=e-t,a=o.a.duration(i),n=Math.floor(a.asHours()),s=a.minutes(),c=a.seconds();n>0?this.countdown="".concat(n).concat(this.$t("letbane.short_hour_unit")," : ").concat(s,"min"):n<=0&&s>0?this.countdown="".concat(s,"min"):n<=0&&s<=0&&c>0?this.countdown="1min":(this.countdown=null,this.hasExpired=!0),this.hasExpired||!this.ticket||this.ticket.daycode||(console.log("FAILED",this.ticket,this.hasExpired),this.countdown=null,this.invalidTicket=!0)},formatDate:function(t){return Object(_["a"])(t).format("DD MMMM YYYY HH:mm")},updateOnlineStatus:function(t){this.countdown&&(this.onLine="online"===t.type)}}},v=b,f=(i("b095"),i("2877")),k=Object(f["a"])(v,a,n,!1,null,"128c4141",null);e["default"]=k.exports},"5aa9":function(t,e,i){t.exports=i.p+"static/img/letbane-logo-text.587ab6f3.svg"},b095:function(t,e,i){"use strict";var a=i("b437"),n=i.n(a);n.a},b437:function(t,e,i){}}]);
//# sourceMappingURL=page-payment-receipt.73019acf.js.map